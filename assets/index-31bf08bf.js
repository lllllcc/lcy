import{I as _,d as q,r as p,D as O,J as m,c as n,e as z,f as e,w as a,F as B,o as N,k as u,y as T,h as j}from"./index-2f7bbdd9.js";const E=()=>_.get("/admin/acl/permission"),F=r=>r.id?_.put("/admin/acl/permission/update",r):_.post("/admin/acl/permission/save",r),M=r=>_.delete(`/admin/acl/permission/remove/${r}`),A={class:"dialog-footer"},G={name:"permission"},J=q({...G,setup(r){const b=p();O(async()=>{await f()});const f=async()=>{let l=await E();l.code===200?b.value=l.data:m({type:"error",message:l.message})},i=p(!1),v=p(),s=p({name:"",level:0,pid:0,code:""}),V=l=>{Object.assign(s.value,{name:"",level:0,pid:0,code:""}),i.value=!0,v.value="添加菜单",s.value.level=l.level+1,s.value.pid=l.id},C=l=>{i.value=!0,v.value="编辑菜单",Object.assign(s.value,l)},k=async()=>{let l=await F(s.value);l.code===200?(m({type:"success",message:l.message}),f(),i.value=!1):m({type:"error",message:l.message})},D=()=>{i.value=!1},P=async l=>{let o=await M(l.id);o.code===200?(m({type:"success",message:o.message}),f()):m({type:"error",message:o.data??o.message})};return(l,o)=>{const c=n("el-table-column"),d=n("el-button"),x=n("el-popconfirm"),U=n("el-table"),g=n("el-input"),y=n("el-form-item"),$=n("el-form"),h=n("el-dialog");return N(),z(B,null,[e(U,{data:b.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:a(()=>[e(c,{prop:"name",label:"名称",sortable:""}),e(c,{prop:"code",label:"权限值",sortable:""}),e(c,{prop:"updateTime",label:"修改时间",sortable:""}),e(c,{label:"操作"},{default:a(t=>[e(d,{type:"primary",size:"small",onClick:w=>V(t.row)},{default:a(()=>[u(T(t.row.level===3?"添加功能":"添加菜单"),1)]),_:2},1032,["onClick"]),e(d,{type:"primary",size:"small",disabled:t.row.level<=1,onClick:w=>C(t.row)},{default:a(()=>[u("编辑")]),_:2},1032,["disabled","onClick"]),e(x,{title:"确定要删除吗?",onConfirm:w=>P(t.row)},{reference:a(()=>[e(d,{type:"primary",size:"small",disabled:t.row.level<=1},{default:a(()=>[u("删除")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(h,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=t=>i.value=t),title:v.value,width:"500","align-center":""},{footer:a(()=>[j("div",A,[e(d,{onClick:D},{default:a(()=>[u("取消")]),_:1}),e(d,{type:"primary",onClick:k},{default:a(()=>[u(" 确定")]),_:1})])]),default:a(()=>[e($,null,{default:a(()=>[e(y,{"label-width":"4em",label:"名称"},{default:a(()=>[e(g,{placeholder:"名称",modelValue:s.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>s.value.name=t)},null,8,["modelValue"])]),_:1}),e(y,{"label-width":"4em",label:"权限值"},{default:a(()=>[e(g,{placeholder:"权限值",modelValue:s.value.code,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value.code=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{J as default};
