import{I as v,d as Z,r as d,D as ee,U as te,c as s,q as z,w as r,o as b,f as a,k as y,h as k,i,e as ae,J as u}from"./index-e73899b3.js";import{_ as le}from"./plugin-vueexport-helper-c27b6911.js";const oe=(c,g)=>v.get(`/admin/product/baseTrademark/${c}/${g}`),re=c=>c.id?v.put("/admin/product/baseTrademark/update",c):v.post("/admin/product/baseTrademark/save",c),se=c=>v.delete(`/admin/product/baseTrademark/remove/${c}`),ne=["src"],de={class:"dialog-footer"},ie=["src"],ce={class:"demo-pagination-block"},ue={name:"trademark"},me=Z({...ue,setup(c){let g=d(1),U=d(3),h=d(0),x=d();const m=d();ee(()=>{p()});const p=async()=>{const e=await oe(g.value,U.value);e.code===200?(h.value=e.data.total,x.value=e.data.records):console.log("品牌数据获取失败")},T=d(1),C=d(3),$=d(!0),q=d(!1),w=e=>{console.log(`${e} items per page`),U.value=e,g.value=1,p()},B=e=>{console.log(`current page: ${e}`),g.value=e,p()},_=d(!1),N="140px";let l=te({tmName:"",logoUrl:"",id:0,createTime:"",updateTime:""});const P=async()=>{m.value.validate();const e=await re(l);e.code===200?l.id?(u({type:"success",message:"修改成功"}),p(),console.log(e)):(u({type:"success",message:"添加成功"}),p()):u({type:"error",message:"操作失败"}),_.value=!1},L=()=>{_.value=!1},O=async e=>{var t;l.id=e.id,l.tmName=e.tmName,l.logoUrl=e.logoUrl,(t=m.value)==null||t.clearValidate(),_.value=!0},S=async e=>{(await se(e.id)).code===200?(u({type:"success",message:"删除成功"}),p()):u({type:"error",message:"删除失败"})},j=e=>e.type=="image/png"||e.type=="image/jpeg"||e.type=="image/gif"?e.size/1024/1024<4?!0:(u({type:"error",message:"文件大小错误,应小于4MB"}),!1):(u({type:"error",message:"文件格式错误,仅支持jpg(jpeg)/png/gif"}),!1),D=e=>{e.code===200?(m.value.clearValidate("logoUrl"),l.logoUrl=e.data):u({type:"error",message:"上传失败"})},E=()=>{l.tmName="",l.logoUrl="",l.id=0,m.value&&m.value.clearValidate(),_.value=!0},G={tmName:[{required:!0,trigger:"blur",validator:(e,t,n)=>{t.trim().length>=2?n():n(new Error("名称应该大于等于两位"))}}],logoUrl:[{required:!0,validator:(e,t,n)=>{t?n():n(new Error("logo必须上传"))}}]},M=e=>{e&&e.validate(t=>{if(t)P();else return console.log("error submit!"),!1})};return(e,t)=>{const n=s("el-button"),A=s("el-input"),V=s("el-form-item"),W=s("Plus"),I=s("el-icon"),F=s("el-upload"),H=s("el-form"),J=s("el-dialog"),f=s("el-table-column"),K=s("el-popconfirm"),Q=s("el-table"),R=s("el-pagination"),X=s("el-card");return b(),z(X,{class:"box-card"},{default:r(()=>[a(n,{type:"primary",size:"default",icon:"Plus",text:"",onClick:E},{default:r(()=>[y(" 添加品牌 ")]),_:1}),a(J,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=o=>_.value=o),title:i(l).id?"修改品牌":"添加品牌"},{footer:r(()=>[k("span",de,[a(n,{onClick:L},{default:r(()=>[y("取消")]),_:1}),a(n,{type:"primary",onClick:t[1]||(t[1]=o=>M(m.value))},{default:r(()=>[y(" 确定 ")]),_:1})])]),default:r(()=>[a(H,{rules:G,model:i(l),ref_key:"refForm",ref:m},{default:r(()=>[a(V,{label:"品牌名称","label-width":N,prop:"tmName"},{default:r(()=>[a(A,{modelValue:i(l).tmName,"onUpdate:modelValue":t[0]||(t[0]=o=>i(l).tmName=o),autocomplete:"off",placeholder:"请输入品牌名称"},null,8,["modelValue"])]),_:1}),a(V,{label:"品牌LOGO","label-width":N,prop:"logoUrl"},{default:r(()=>[a(F,{class:"avatar-uploader",action:"/api/admin/product/fileUpload","show-file-list":!1,"on-success":D,"before-upload":j},{default:r(()=>[i(l).logoUrl?(b(),ae("img",{key:0,src:i(l).logoUrl.startsWith("http")?i(l).logoUrl:`http://${i(l).logoUrl}`,class:"avatar"},null,8,ne)):(b(),z(I,{key:1,class:"avatar-uploader-icon"},{default:r(()=>[a(W)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(Q,{data:i(x),border:"",style:{width:"100%",margin:"10px 0px"}},{default:r(()=>[a(f,{label:"序号",width:"80px",align:"center",type:"index"}),a(f,{prop:"tmName",label:"品牌名称",width:"180"}),a(f,{label:"品牌LOGO"},{default:r(({row:o})=>[k("img",{src:o.logoUrl.startsWith("http")?o.logoUrl:`http://${o.logoUrl}`,alt:"",style:{height:"100px",width:"100px"}},null,8,ie)]),_:1}),a(f,{label:"品牌操作"},{default:r(({row:o})=>[a(n,{type:"primary",icon:"Edit",size:"small",onClick:Y=>O(o)},null,8,["onClick"]),a(K,{title:"确定删除吗?",onConfirm:Y=>S(o)},{reference:r(()=>[a(n,{type:"primary",icon:"Delete",size:"small"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),k("div",ce,[a(R,{"current-page":T.value,"onUpdate:currentPage":t[3]||(t[3]=o=>T.value=o),"page-size":C.value,"onUpdate:pageSize":t[4]||(t[4]=o=>C.value=o),"page-sizes":[3,6,9,12],disabled:q.value,background:$.value,layout:" prev, pager, next, jumper,->, sizes,total",total:i(h),onSizeChange:w,onCurrentChange:B},null,8,["current-page","page-size","disabled","background","total"])])]),_:1})}}});const ve=le(me,[["__scopeId","data-v-bbd48e82"]]);export{ve as default};
