import{I as C,d as X,r as c,D as Y,c as u,q as z,w as a,o as y,f as e,h as d,i as p,k as S,y as b,e as I,x as V,F as D,K as Z,J as g,p as ee,g as te}from"./index-2f7bbdd9.js";import{_ as ae}from"./plugin-vueexport-helper-c27b6911.js";const le=(n,v)=>C.get(`/admin/product/list/${n}/${v}`),se=n=>C.get(`/admin/product/cancelSale/${n}`),ne=n=>C.get(`/admin/product/onSale/${n}`),oe=n=>C.get(`/admin/product/getSkuInfo/${n}`),re=n=>C.delete(`/admin/product/deleteSku/${n}`),k=n=>(ee("data-v-ad264526"),n=n(),te(),n),ue=["src"],ie={class:"demo-pagination-block"},ce=k(()=>d("span",null,"名称",-1)),pe=k(()=>d("span",null,"描述",-1)),de=k(()=>d("span",null,"价格",-1)),_e=k(()=>d("span",null,"平台属性",-1)),ge=k(()=>d("span",null,"销售属性",-1)),me=k(()=>d("span",null,"商品图片",-1)),fe=["src"],ye={name:"sku"},xe=X({...ye,setup(n){let v=c(),m=c(),_=c(1),f=c(10);const q=c(1),N=c(3),A=c(!0),E=c(!1);let h=c(!1);const F=async s=>{console.log(`${s} items per page`),f.value=s,_.value=1,await x(_.value,f.value)},P=async s=>{console.log(`current page: ${s}`),_.value=s,await x(_.value,f.value)},x=async(s,l)=>{let i=await le(s,l);i.code===200?v.value=i.data:console.log(i.message)};Y(async()=>{await x(_.value,f.value)});const G=async s=>{s.isSale===0?(await ne(s.id)).code===200?(g({type:"success",message:"上架成功"}),await x(_.value,f.value)):g({type:"error",message:"上架失败"}):(await se(s.id)).code===200?(g({type:"success",message:"下架成功"}),await x(_.value,f.value)):g({type:"error",message:"下架失败"})},M=()=>{g({type:"success",message:"正在更新中"})},T=async s=>{h.value=!0;let l=await oe(s.id);l.code===200?m.value=l.data:g({type:"error",message:l.message})},j=async s=>{let l=await re(s.id);l.code===200?(g({type:"success",message:l.message}),await x(_.value,f.value)):g({type:"error",message:l.data??l.message})};return(s,l)=>{const i=u("el-table-column"),$=u("el-button"),J=u("el-popconfirm"),K=u("el-table"),O=u("el-pagination"),o=u("el-col"),w=u("el-row"),B=u("el-tag"),R=u("el-carousel-item"),H=u("el-carousel"),Q=u("el-drawer"),W=u("el-card");return y(),z(W,null,{default:a(()=>{var L,U;return[e(K,{border:"",style:{margin:"10px 0 20px 0"},data:(L=p(v))==null?void 0:L.records,height:"600"},{default:a(()=>[e(i,{label:"序号",type:"index",align:"center",width:"100px"}),e(i,{label:"名称",align:"center",width:"200px",prop:"skuName","show-overflow-tooltip":""}),e(i,{label:"描述",align:"center",width:"200px",prop:"skuDesc","show-overflow-tooltip":""}),e(i,{label:"默认图片",align:"center",width:"200px"},{default:a(t=>[d("img",{src:t.row.skuDefaultImg,alt:"图片加载失败了",style:{width:"100px",height:"100px"}},null,8,ue)]),_:1}),e(i,{label:"重量(克)",align:"center",width:"200px",prop:"weight"}),e(i,{label:"价格(元)",align:"center",width:"200px",prop:"price"}),e(i,{label:"操作",width:"450px",fixed:"right"},{default:a(t=>[e($,{type:t.row.isSale?"success":"info",icon:t.row.isSale?"Bottom":"Top",size:"small",onClick:r=>G(t.row)},null,8,["type","icon","onClick"]),e($,{type:"primary",icon:"Edit",size:"small",onClick:l[0]||(l[0]=r=>M())}),e($,{type:"info",icon:"InfoFilled",size:"small",onClick:r=>T(t.row)},null,8,["onClick"]),e(J,{title:"是否要删除",onConfirm:r=>j(t.row)},{reference:a(()=>[e($,{type:"danger",icon:"Delete",size:"small"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),d("div",ie,[e(O,{"current-page":q.value,"onUpdate:currentPage":l[1]||(l[1]=t=>q.value=t),"page-size":N.value,"onUpdate:pageSize":l[2]||(l[2]=t=>N.value=t),"page-sizes":[10,20,30,40],disabled:E.value,background:A.value,layout:" prev, pager, next, jumper,->, sizes,total",total:(U=p(v))==null?void 0:U.total,onSizeChange:F,onCurrentChange:P},null,8,["current-page","page-size","disabled","background","total"])]),e(Q,{modelValue:p(h),"onUpdate:modelValue":l[3]||(l[3]=t=>Z(h)?h.value=t:h=t),title:"查看商品详情","lock-scroll":!0,direction:"rtl"},{default:a(()=>[e(w,{style:{margin:"10px 0px"}},{default:a(()=>[e(o,{span:6},{default:a(()=>[ce]),_:1}),e(o,{span:18},{default:a(()=>{var t;return[S(b((t=p(m))==null?void 0:t.skuName),1)]}),_:1})]),_:1}),e(w,{style:{margin:"10px 0px"}},{default:a(()=>[e(o,{span:6},{default:a(()=>[pe]),_:1}),e(o,{span:18},{default:a(()=>{var t;return[S(b((t=p(m))==null?void 0:t.skuDesc),1)]}),_:1})]),_:1}),e(w,{style:{margin:"10px 0px"}},{default:a(()=>[e(o,{span:6},{default:a(()=>[de]),_:1}),e(o,{span:18},{default:a(()=>{var t;return[S(b((t=p(m))==null?void 0:t.price),1)]}),_:1})]),_:1}),e(w,{style:{margin:"10px 0px"}},{default:a(()=>[e(o,{span:6},{default:a(()=>[_e]),_:1}),e(o,{span:18},{default:a(()=>{var t;return[(y(!0),I(D,null,V((t=p(m))==null?void 0:t.skuAttrValueList,r=>(y(),z(B,{style:{margin:"0px 5px"},key:r.id},{default:a(()=>[S(b(r.valueName),1)]),_:2},1024))),128))]}),_:1})]),_:1}),e(w,{style:{margin:"10px 0px"}},{default:a(()=>[e(o,{span:6},{default:a(()=>[ge]),_:1}),e(o,{span:18},{default:a(()=>{var t;return[(y(!0),I(D,null,V((t=p(m))==null?void 0:t.skuSaleAttrValueList,r=>(y(),z(B,{key:r.id,style:{margin:"0px 5px"}},{default:a(()=>[S(b(r.saleAttrValueName),1)]),_:2},1024))),128))]}),_:1})]),_:1}),e(w,{style:{margin:"10px 0px"}},{default:a(()=>[e(o,{span:6},{default:a(()=>[me]),_:1}),e(o,{span:18},{default:a(()=>[e(H,{autoplay:!0,interval:1e3,type:"card",height:"200px"},{default:a(()=>{var t;return[(y(!0),I(D,null,V((t=p(m))==null?void 0:t.skuImageList,r=>(y(),z(R,{key:r.id},{default:a(()=>[d("img",{src:r.imgUrl,alt:"图片加载失败",style:{width:"100%",height:"100%"}},null,8,fe)]),_:2},1024))),128))]}),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1})}}});const ve=ae(xe,[["__scopeId","data-v-ad264526"]]);export{ve as default};
